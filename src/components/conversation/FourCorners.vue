<template lang="pug">

#fourcorners-banner(v-bind:class="{ expanded: expanded }")
  #tile-wrapper

    .tile#info-tile
      //- icon(v-if="expanded && !(currentCorner === default)" v-bind:name="currentCorner.icon")
      h1 {{ corners[currentCorner].title }}
      p {{ (expanded) ? corners[currentCorner].text : bannerText }}
      .buttons(v-if="expanded")
        .pure-button.pure-button-subtle(v-if="currentCorner === 'default'" @click="currentCorner = 'default'; expanded = false") Minimize
        router-link.pure-button.pure-button-subtle(v-if="currentCorner !== 'default'" to="/markdown/fourcorners.md") Learn More

    #corners
      .corner#corner-top-left(v-bind:class="{ active: currentCorner === 'topLeft' }" @click="toggleCorner('topLeft')")
      .corner#corner-top-right(v-bind:class="{ active: currentCorner === 'topRight' }" @click="toggleCorner('topRight')")
      .corner#corner-bottom-left(v-bind:class="{ active: currentCorner === 'bottomLeft' }" @click="toggleCorner('bottomLeft')")
      .corner#corner-bottom-right(v-bind:class="{ active: currentCorner === 'bottomRight' }" @click="toggleCorner('bottomRight')")

</template>

<script>
import _ from 'lodash';
import * as config from '@/api/config';
import {mapGetters} from 'vuex';
import Moment from 'moment';

export default {
  name: 'four-corners',
  props: ['content'],
  data() {
    return {
      expanded: false,
      tease: false,
      bannerText: 'Tap the bottom right corner to learn how Four Corners offers a new way of enriching photographs with rich metadata',
      corners: {
        default: {
          icon: 'picture-o',
          title: 'Four Corners',
          text: 'Explore each corner to learn the types of contextual information that can be linked in a Four Corners image'
        },
        topLeft: {
          icon: 'history',
          title: 'Image Context',
          text: 'You can add photographs and video that add more information and context, such as those made before or after the event shown, or from other perspectives, or images that supplement a portrait.',
        },
        topRight: {
          icon: 'share-square',
          title: 'Links',
          text: 'Include links here to websites that contain an accompanying article, related video, historical explanation, or any other contextualizing information; you can also link to the photographerâ€™s website or that of an agency or publication.',
        },
        bottomLeft: {
          icon: 'info-circle',
          title: 'Backstory',
          text: 'Here you can describe in text or video what was going on behind the scenes that is not obvious in the photograph itself, or include the point of view of the subject or a witness.',
        },
        bottomRight: {
          icon: 'copyright',
          title: 'Copyright/License',
          text: 'Here you can specify how you want to protect the copyright of your image, asserting a copyright for yourself or another entity. Alternatively you could add a Creative Commons license.',
        },
      },
      currentCorner: 'default',
    };
  },
  methods: {
    toggleCorner(corner) {
      if (this.expanded) {
        if (corner === this.currentCorner) {
          this.currentCorner = 'default';
        } else {
          this.currentCorner = corner;
        }
      } else {
        this.currentCorner = 'default';
        this.expanded = true;
      }
    },
  },
};
</script>

<style lang="stylus" scoped>
@import '~stylus/shared'
@import '~stylus/layout/course-content'

$corner-size = 50px
$corner-offset = 15px
$corner-width = 8px

#fourcorners-banner
  radius(6px)
  background-color $color-darkest-grey
  background url('https://images.pexels.com/photos/24486/pexels-photo-24486.jpg?w=940&h=650&auto=compress&cs=tinysrgb')
  /*background url('https://images.pexels.com/photos/67504/pexels-photo-67504.jpeg?w=940&h=650&auto=compress&cs=tinysrgb')*/
  background-image()
  background-position bottom right

  margin-top 20px
  overflow hidden
  position relative
  text-align center

  @media(max-width: 800px)
    radius(0)
    margin 20px 0 0 0

  &:after
    animate()
    pinned()
    background-color alpha(black, 0.5)
    content ''
    position absolute
    pointer-events none
    z-index 0

  #tile-wrapper
    animate()
    transition-duration 1s
    height 100px
    overflow visible
    padding 50px 30px
    position relative
    z-index 1
    h1, h2, h3, h4, h5, p
      reset()
      color white
      margin 0 auto
      max-width 460px
      padding 0 5px
    h1
      padding 0 20px 10px 20px
    p
      line-height 20px
      margin 0 auto
      margin-bottom 10px
      min-height 40px
      max-height 60px
      overflow-x hidden
      overflow-y auto

    .pure-button
      background-color alpha(white, 0.1)
      border-color transparent
      color white
      margin 10px auto 5px auto
      &:hover
        background-color white
        color $color-darkest-grey

    .tile
      &#info-tile
        .buttons
          .pure-button
            display inline-block
            margin 0 5px
        .fa-icon
          color white
          font-size 3em
          margin 0 auto

    #corners
      .corner
        animate()
        cursor pointer
        opacity 0
        position absolute
        height $corner-size
        width $corner-size
        &:hover
          opacity 1
        &#corner-top-left
          border-top white $corner-width solid
          border-left white $corner-width solid
          left $corner-offset
          top $corner-offset
        &#corner-top-right
          border-top white $corner-width solid
          border-right white $corner-width solid
          right $corner-offset
          top $corner-offset
        &#corner-bottom-left
          border-bottom white $corner-width solid
          border-left white $corner-width solid
          left $corner-offset
          bottom $corner-offset
        &#corner-bottom-right
          border-bottom white $corner-width solid
          border-right white $corner-width solid
          right $corner-offset
          bottom $corner-offset
          opacity 0.3
          &:hover
            opacity 1

        &#corner-top-left
          transition-delay 0.3s

        &#corner-top-right
          transition-delay 0.1s

        &#corner-bottom-left
          transition-delay 0.5s

        &.active
          border-color #0cf !important
          opacity 1 !important


  &.expanded
    &:after
      pinned()
      background-color alpha(black, 0.8)
    #tile-wrapper
      padding 90px 40px 120px 40px
      #corners
        .corner
          opacity 0.3
          transition-delay 0s !important
          &:hover
            opacity 1
</style>
